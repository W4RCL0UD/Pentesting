#!/bin/bash

#================================================================
#% SYNOPSIS
#+    ./assetfinder.sh domain.com
#%
#% DESCRIPTION
#%    This script is used to harvest subdomains for a URL
#%
#% CREDITS
#%    @TheCyberMentor - Practical Ethical Hacking
#%    https://academy.tcm-sec.com/p/practical-ethical-hacking-the-complete-course
#%
#================================================================

url=$1

if [ ! -d "assets" ];then
	mkdir assets
fi

if [ ! -d "assets/$url" ];then
	mkdir assets/$url
fi

echo "[+] Harvesting subdomains with assetfinder..."
assetfinder $url >> assets/$url/assets.txt
cat assets/$url/assets.txt | grep $1 >> assets/$url/$url.txt
rm assets/$url/assets.txt

echo "[+] Probing for alive domains..."
cat assets/$url/$url.txt | sort -u | sed 's/https\?:\/\///' >> assets/$url/alive.txt
